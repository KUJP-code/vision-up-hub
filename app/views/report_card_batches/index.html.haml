= render 'shared/subtitle', text: t('.report_cards')


%main.flex.flex-col.gap-5.p-3.text-center
  - if @schools.many?
    %nav.flex.flex-wrap.gap-3
      - @schools.each do |sch|
        = link_to sch.name,
                  report_card_batches_path(school_id: sch.id, view: @current_view),
                  class: "btn btn-outline #{'bg-secondary text-white' if sch.id == @school.id}"

  %nav{ class: 'flex items-end gap-4 border-b justify-center', role: 'tablist', 'aria-label': t('.tab_label') }
    = link_to t('.school_tests_tab'),
              report_card_batches_path(school_id: @school.id, view: 'school'),
              id: 'school-tests-tab',
              role: 'tab',
              'aria-selected': (@current_view == 'school').to_s,
              'aria-controls': 'school-tests-panel',
              class: (@current_view == 'school' ? 'pb-2 border-b-2 border-secondary text-secondary font-semibold' : 'pb-2 border-b-2 border-transparent text-neutral-500 hover:text-secondary-50')
    = link_to t('.pearson_tests_tab'),
              report_card_batches_path(school_id: @school.id, view: 'pearson'),
              id: 'pearson-tests-tab',
              role: 'tab',
              'aria-selected': (@current_view == 'pearson').to_s,
              'aria-controls': 'pearson-tests-panel',
              class: (@current_view == 'pearson' ? 'pb-2 border-b-2 border-secondary text-secondary font-semibold' : 'pb-2 border-b-2 border-transparent text-neutral-500 hover:text-secondary-50')

  .mt-4{ role: 'tabpanel', id: 'pearson-tests-panel', 'aria-labelledby': 'pearson-tests-tab', class: (@current_view == 'pearson' ? '' : 'hidden') }
    = render 'pearson_batches_table', batches: @pearson_batches, school: @school

  .mt-4{ role: 'tabpanel', id: 'school-tests-panel', 'aria-labelledby': 'school-tests-tab', class: (@current_view == 'school' ? '' : 'hidden') }
    = render 'school_batches_table', batches: @batches, school: @school
